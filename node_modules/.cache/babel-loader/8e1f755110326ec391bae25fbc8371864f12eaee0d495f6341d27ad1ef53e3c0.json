{"ast":null,"code":"var _jsxFileName = \"/Users/trinhduong/chatroom2/my-react-app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { googleLogout, useGoogleLogin } from '@react-oauth/google';\nimport Chatroom from \"./components/Chatroom/Chatroom.tsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [isAdmin, setAdmin] = useState(false);\n  const login = useGoogleLogin({\n    onSuccess: codeResponse => setUser(codeResponse),\n    onError: error => console.log('Login Failed:', error)\n  });\n  useEffect(() => {\n    if (user) {\n      fetch(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${user.access_token}`, {\n        headers: {\n          Authorization: `Bearer ${user.access_token}`,\n          Accept: 'application/json'\n        }\n      }).then(response => response.json()).then(data => {\n        setProfile(data);\n        addUserToDatabase(data);\n        checkAdminStatus(data);\n      }).catch(error => console.log(error));\n    }\n  }, [user]);\n  const checkAdminStatus = googleProfile => {\n    fetch(`http://localhost:443/checkAdmin?customer_id=${googleProfile.id}&customer_email=${googleProfile.email}`).then(response => response.json()).then(data => {\n      console.log(data);\n      if (data.exists) {\n        setAdmin(true);\n      } else {\n        setAdmin(false);\n      }\n    }).catch(error => {\n      console.error('Failed to check admin status:', error);\n      setAdmin(false);\n    });\n  };\n  const addUserToDatabase = googleProfile => {\n    const userData = {\n      CUSTOMER_ID: parseInt(googleProfile.id),\n      // Assuming CUSTOMER_ID is a string\n      CUSTOMER_EMAIL: googleProfile.email,\n      CUSTOMER_NAME: googleProfile.name\n    };\n    fetch('http://localhost:443/setUsers', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    }).then(response => console.log('User added successfully:', response)).catch(error => console.error('Failed to add user:', error));\n  };\n  const logOut = () => {\n    googleLogout();\n    setUser(null);\n    setProfile(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: profile ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"border-2 border-red-400 p-2 \",\n        onClick: logOut,\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Chatroom, {\n        user: profile,\n        isLoggedIn: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"ADMIN\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"NOT ADMIN\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => login(),\n      children: \"Sign in with Google \\uD83D\\uDE80\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"IXjAod9OE71Gr1cRnHnFKhGzByY=\", false, function () {\n  return [useGoogleLogin];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","googleLogout","useGoogleLogin","Chatroom","jsxDEV","_jsxDEV","App","_s","user","setUser","profile","setProfile","isAdmin","setAdmin","login","onSuccess","codeResponse","onError","error","console","log","fetch","access_token","headers","Authorization","Accept","then","response","json","data","addUserToDatabase","checkAdminStatus","catch","googleProfile","id","email","exists","userData","CUSTOMER_ID","parseInt","CUSTOMER_EMAIL","CUSTOMER_NAME","name","method","body","JSON","stringify","logOut","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","isLoggedIn","_c","$RefreshReg$"],"sources":["/Users/trinhduong/chatroom2/my-react-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { googleLogout, useGoogleLogin } from '@react-oauth/google';\n\nimport Chatroom from \"./components/Chatroom/Chatroom.tsx\"\n\n\nfunction App() {\n    const [user, setUser] = useState(null);\n    const [profile, setProfile] = useState(null);\n    const [isAdmin, setAdmin] = useState(false);\n\n    const login = useGoogleLogin({\n        onSuccess: (codeResponse) => setUser(codeResponse),\n        onError: (error) => console.log('Login Failed:', error)\n    });\n\n    useEffect(() => {\n        if (user) {\n            fetch(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${user.access_token}`, {\n                headers: {\n                    Authorization: `Bearer ${user.access_token}`,\n                    Accept: 'application/json'\n                }\n            })\n            .then(response => response.json())\n            .then(data => {\n                setProfile(data);\n                addUserToDatabase(data);\n                checkAdminStatus(data)\n            })\n            .catch(error => console.log(error));\n        }\n    }, [user]);\n\n    const checkAdminStatus = (googleProfile) => {\n        fetch(`http://localhost:443/checkAdmin?customer_id=${googleProfile.id}&customer_email=${googleProfile.email}`)\n        .then(response => response.json())\n        .then(data => {\n            console.log(data)\n            if (data.exists) {\n                setAdmin(true);\n            } else {\n                setAdmin(false);\n            }\n        })\n        .catch(error => {\n            console.error('Failed to check admin status:', error);\n            setAdmin(false);\n        });\n    };\n    \n    const addUserToDatabase = (googleProfile) => {\n        const userData = {\n            CUSTOMER_ID: parseInt(googleProfile.id), // Assuming CUSTOMER_ID is a string\n            CUSTOMER_EMAIL: googleProfile.email,\n            CUSTOMER_NAME: googleProfile.name\n        };\n\n        fetch('http://localhost:443/setUsers', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(userData)\n        })  \n        .then(response => console.log('User added successfully:', response))\n        .catch(error => console.error('Failed to add user:', error));\n    };\n\n    const logOut = () => {\n        googleLogout();\n        setUser(null);\n        setProfile(null);\n    };\n\n    return (\n        <div>\n            {profile ? (\n                <div>\n                    {/* <p>ID: {profile.id}</p>\n                    <img src={profile.picture} alt=\"user\" />\n                    <h3>User Logged in</h3>\n                    <p>Name: {profile.name}</p>\n                    <p>Email Address: {profile.email}</p> */}\n\n                    <button className=\"border-2 border-red-400 p-2 \"onClick={logOut}>Log out</button>\n                    <Chatroom user={profile} isLoggedIn={true} />\n                    {isAdmin ? (\n                        <div>ADMIN</div>\n                    ) : (\n                        <div>NOT ADMIN</div>\n                    )}\n                </div>\n            ) : (\n                <button onClick={() => login()}>Sign in with Google ðŸš€</button>\n            )}\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}